## Only used vars — Figma plugin


Плагин для Figma, который анализирует переменные выбранной коллекции и помогает быстро выявить неиспользуемые переменные.

**Основные возможности:**
- Получает список всех коллекций переменных и отображает их в текстовом блоке в макете Figma.
- При выборе коллекции анализирует все переменные этой коллекции.
- Корректно определяет, какие переменные реально используются на текущей странице (в том числе связанные с цветами, типографикой, layout, icon и др.).
- Токены typography (font-size, font-weight, line-height и др.) теперь корректно определяются как используемые, если они реально применяются в макете.
- Принудительно считает переменные, содержащие "font-family" в имени, использованными (даже если они не найдены на странице).
- Показывает неиспользуемые переменные.
- Выводит результаты (список всех и неиспользуемых переменных) в виде текстовых объектов на canvas.
- Взаимодействует с UI через postMessage (выбор коллекции, отображение данных).

### Быстрый старт

1. Установите [Node.js и npm](https://nodejs.org/en/download/)
2. Установите зависимости:
   ```sh
   npm install
   ```
3. Установите типы Figma API:
   ```sh
   npm install --save-dev @figma/plugin-typings
   ```
4. Соберите проект:
   ```sh
   npm run build
   ```
5. Загрузите папку плагина в Figma через меню "Плагины > Разработка > Новый плагин..."

### Сборка
- Сборка выполняется командой `npm run build` (используется TypeScript, tsconfig настроен на ES2017)
- Исходный код: `code.ts`, итоговый файл для Figma: `code.js`
- node_modules и артефакты сборки игнорируются через .gitignore

### Описание работы

1. После запуска плагина отображается UI с выбором коллекции переменных.
2. При выборе коллекции:
   - Получает все переменные этой коллекции.
   - Находит переменные, которые реально используются на текущей странице (анализирует boundVariables, fills, strokes, а также вложенные типографические токены).
   - Если выбран режим "Показать все" — выводит отсортированный список всех переменных коллекции.
   - Всегда выводит список неиспользуемых переменных, включая корректную обработку токенов typography (не работает с токенами icon, их нужно проверять дополнительно).
   - Результаты выводятся на canvas как текстовые объекты.

### Полезные ссылки
- [Документация по Figma plugins](https://www.figma.com/plugin-docs/)
- [TypeScript](https://www.typescriptlang.org/)
